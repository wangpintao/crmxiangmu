<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>我的合同</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
    <style>
        .divcss5-a {
            line-height: 22px
        }

        /* css 注释说明：设置行距行高22px */
        .divcss5-b {
            line-height: 40px
        }

        /* 设置行距行高22px */
        a:link {
            color: #1E9FFF;
        }

        a:hover {
            color: black;
            text-decoration: none;
        }

        .divcss5-right {
            float: right;
            width: 250px;
            height: 50px
        }
    </style>
</head>
<body>
<div>
    <center>
    <form class="layui-form" action="">
        <div class="layui-inline" align="left">
            <i class="layui-icon layui-icon-layer" style="font-size:30px;color: #1E9FFF;">我的合同</i>
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div class="layui-inline">
            <select name="conid" class="layui-select" >
                <option value="0">请选择</option>
                <option value="1">按合同全称</option>
                <option value="2">按合同编号</option>
                <option value="3">按合同所属部门</option>
                <option value="4">按关联人员</option>
                <option value="5">按合同金额</option>
                <option value="6">按签约日期</option>
            </select>
        </div>
        <div class="layui-inline">
            <input type="text" name="conname" style="width:350px;" placeholder="请输入关键字" autocomplete="off"
                   class="layui-input">
        </div>
        <div class="layui-inline">
            <button class="layui-btn" lay-submit lay-filter="formDemo"><i class="layui-icon layui-icon-search"
                                                                          style="color: #1E9FFF;">查找</i>
            </button>
            <button type="reset" class="layui-btn"><i class="layui-icon">重置</i></button>
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div class="layui-inline" align="right">
            <button type="button" onclick="add()" class="layui-btn"><i class="layui-icon layui-icon-add-1">新增跟单</i></button>
            <button type="button" onclick="flush()" class="layui-btn"><i class="layui-icon layui-icon-refresh-3">刷新</i></button>
        </div>
    </form>
    </center>
</div>

<div style="padding: 20px; background-color: #F2F2F2;">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md2">
            <div class="layui-card">
                <div class="layui-card-header"><b>分类</b></div>
                <div class="layui-card-body">
                    <div class="divcss5-b">
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole("queryAll")>所有分类</a>&nbsp;<span></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole(1)>执行中的合同</a>&nbsp;<span id="label0"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole(2)>已关闭的合同</a>&nbsp;<span id="label1"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole(3)>已撤除的合同</a>&nbsp;<span id="label2"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole(3)>已搁置的合同</a>&nbsp;<span id="label3"></span><br>
                        <hr>
                    </div>
                    <div class="divcss5-b">
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole('week')>本周新增</a>&nbsp;<span id="label4"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#"  onclick=tableRerole('lastWeek')>上周新增</a>&nbsp;<span id="label5"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#" onclick=tableRerole('month')>本月新增</a>&nbsp;<span id="label6"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#" onclick=tableRerole('lastMonth')>上月新增</a>&nbsp;<span id="label7"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#" onclick=tableRerole('quarter')>本季度新增</a>&nbsp;<span id="label8"></span><br>
                        <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
                        <a href="#" onclick=tableRerole('lastQuarter')>上季度新增</a>&nbsp;<span id="label9"></span><br>
                        <hr>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-md10">
            <center>
                <table id="test" lay-filter="test"></table>
            </center>
        </div>
    </div>
</div>

<script type="text/html" id="getname">
    {{#  if(d.data==null){ }}
    {{#  } else { }}
    {{d.data.type_name}}
    {{#  } }}
</script>
<script type="text/html" id="theme">
    <a class="layui-table-link" target="blank" href="/contract/update.do?conid={{d.conid}}&conUcid={{d.conUcid}}&conUid={{d.conUid}}">{{d.conname}}</a>
</script>
<script src="/static/layui/layui.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    var add=function(){
        window.location.href="/contract/add.do";
    }
    var flush=function(){
        window.location.href="/contract/contract.html";
    }

    layui.use(['element', 'layer', 'table', 'util','form'], function () {
        var element = layui.element;
        var layer = layui.layer;
        var table = layui.table;
        var util = layui.util;
        var form = layui.form;
        var $=layui.jquery;

        //监听折叠
        element.on('collapse(test)', function (data) {
            layer.msg('展开状态：' + data.show);
        });
        //table 渲染
        table.render({
            elem: '#test'
            , url: '/contract/queryall.do'
            , height:500
            , width:1108
            , page: true
            , limit:10
            , limits:[5,10,15,20]
            , cols: [[
                {type: 'numbers', title: '序列', width:100, sort: true, align: 'center'}
                , {field: 'conname', title: '合同全称', width:270, align: 'center',toolbar:'#theme'}
                , {field: 'serial', title: '合同编号', width:120, align: 'center'}
                , {field: 'conSum', title: '合同金额(元)', width:150,sort: true,align: 'center'}
                , {field: 'forClick', title: '回款额(元)', width:130,sort: true, align: 'center'}
                , {field: 'forReply', title: '开票额(元)', width:130,sort: true, align: 'center'}
                , {field: 'conStartdate', title: '签约日期', width:200, align: 'center'}
            ]]
        });

        form.on('submit(formDemo)', function (data) {
            table.reload('test',{
                url:'/contract/queryall.do'
                ,where:{
                    conid:data.field.conid
                    ,conname: data.field.conname
                }
            });
            return false;
        });

        window.tableRerole=function (value) {
            console.log(value);
            table.reload('test',{
                url:'/after/queryBya.do'
                ,where:{
                    "aftStatus": value
                }
            });
        };
    });


</script>

</body>
</html>