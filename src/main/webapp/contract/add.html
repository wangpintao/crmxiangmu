<!DOCTYPE html>
<!--suppress ALL-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>新增合同</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
</head>
<script src="/static/layui/layui.js"></script>
<script src="/static/js/jquery-3.3.1.min.js"></script>
<body>
<br>
<div style="margin:0 auto; width:80%;height:auto;">
    <form class="layui-form" method="post" action="/documentary/update1.do">
        <div class="layui-inline" style="float: left">
            <label class="layui-form-label"><span style="color:#FF0000;">*</span>合同名称</label>
            <div class="layui-input-block" style="width: 400px;height: 40px">
                <input align="left" type="text" id="a" style="border:0px;font-size:20px"/>
            </div>
        </div>
        <div class="layui-inline" style="float: right">
            <a href="javascript:window.opener=null;window.open('','_self');window.close()"
               class="layui-btn layui-icon layui-icon-return">返回</a>
            <a href="javascript:;" id="flush" class="layui-btn layui-icon layui-icon-refresh">刷新</a>
        </div>

        <div class="layui-form-item"
             style="border:1px solid ;background-color:lightyellow;height:35px;font-size: 20px;border-left: none;border-right: none;">
            客户信息
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label"><span style="color:#FF0000;">*</span>客户名称</label>
                <div class="layui-input-block" style="width: 400px;height: 40px">
                    <select lay-filter="test">
                        <option value="0">请选择</option>
                        <option th:each="a:${list}" th:value="${a.ucid}" th:text="${a.cliName}"></option>
                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">所属行业</label>
                <div class="layui-input-block">
                    <input type="text" id="b" readonly autocomplete="off" class="layui-input"
                           style="width:400px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">所在城市</label>
                <div class="layui-input-block">
                    <input type="text" id="c" readonly autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">详细地址</label>
                <div class="layui-input-block">
                    <input type="text" id="d" readonly autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item"
             style="border:1px solid ;background-color:lightyellow;height:35px;font-size: 20px;border-left: none;border-right: none;">
            合同信息
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label"><span style="color:#FF0000;">*</span>合同名称</label>
                <div class="layui-input-block">
                    <input type="text" onkeyup="add(this.value)" name="conname" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label"><span style="color:#FF0000;">*</span>合同编号</label>
                <div class="layui-input-block">
                    <input type="text" name="serial" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">合同金额</label>
                <div class="layui-input-block">
                    <input type="text" name="conSum" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label"><span style="color:#FF0000;">*</span>签约日期</label>
                <div class="layui-input-block">
                    <input type="text" name="conStartdate" placeholder="yyyy-MM-dd" autocomplete="off"
                           style="width: 400px;height: 40px" class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">生效日期</label>
                <div class="layui-input-block">
                    <input type="text" name="conPredate" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">服务期至</label>
                <div class="layui-input-block">
                    <input type="text" name="conEnddate" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label"><span style="color:#FF0000;">*</span>对方联系人</label>
                <div class="layui-input-block">
                    <input type="text" name="conContacts" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">固定电话</label>
                <div class="layui-input-block">
                    <input type="text" name="conOffphone" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">移动电话</label>
                <div class="layui-input-block">
                    <input type="text" name="conPhone" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">邮件/QQ</label>
                <div class="layui-input-block">
                    <input type="text" name="conMail" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item layui-form-text">
            <div class="layui-inline">
                <label class="layui-form-label">主要技术条款</label>
                <div class="layui-input-block">
                    <textarea name="technical" class="layui-textarea" style="width: 925px;height: 40px"></textarea>
                </div>
            </div>
        </div>

        <div class="layui-form-item layui-form-text">
            <div class="layui-inline">
                <label class="layui-form-label">主要商务条款</label>
                <div class="layui-input-block">
                    <textarea name="clause" class="layui-textarea" style="width: 925px;height: 40px"></textarea>
                </div>
            </div>
        </div>

        <div class="layui-form-item layui-form-text">
            <div class="layui-inline">
                <label class="layui-form-label">相关附件</label>
                <div class="layui-input-block">
                    <input type="text" name="conFile" autocomplete="off" class="layui-input"
                           style="width: 925px;height: 40px">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">合同所属部门</label>
                <div class="layui-input-block">
                    <input type="text" name="" autocomplete="off" class="layui-input" style="width: 400px;height: 40px">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">关联人员</label>
                <div class="layui-input-block">
                    <input type="text" name="conUname" autocomplete="off" class="layui-input"
                           style="width: 400px;height: 40px">
                </div>
            </div>
        </div>

        <br>
        <div style="text-align: center;">
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button lay-submit="" class="layui-btn layui-btn-radius layui-btn-normal">保存</button>
                    <a href="javascript:window.opener=null;window.open('','_self');window.close()"
                       class="layui-btn layui-btn-radius layui-btn-normal">取消</a>
                </div>
            </div>
        </div>
    </form>
</div>
<script>
    var st = "";
    var add = function (a) {
        var str = st + "-" + a;
        $("#a").val(str);
    }

    layui.use(['form', 'upload', 'jquery', 'laydate'], function () {
        var form = layui.form;
        var $ = layui.jquery;//异步
        var upload = layui.upload;
        var laydate = layui.laydate;

        form.on('select(test)', function (data) {
            var flag = data.value;
            if (flag == 0) {
                $("#a").val("");
                $("#b").val("");
                $("#c").val("");
                $("#d").val("");
            } else {
                $.ajax({
                    type: "post",
                    url: "/contract/user.do?ucid=" + flag,
                    dataType: "json",
                    success: function (data) {
                        st = data.data.cliName;
                        $("#a").val(data.data.cliName);
                        $("#b").val(data.data.cliBusiness.clibusname);
                        $("#c").val(data.data.city);
                        $("#d").val(data.data.csite);
                    }
                });
            }
        });

        form.verify({
            comStaid: function (value, item) {
                if (value == 0) {
                    return '请选择当前状态';
                }
            }
        });

    });
</script>
</body>
</html>