<!DOCTYPE html>
<!--suppress ALL-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>商机管理</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
</head>
<body class="#8dbfe4">

<div style="text-align: center;">
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>商机管理</legend>
</fieldset>
</div>
<div id="main" style="width:100%;">
    <div id="left" style="width:15%;float:left;">
        <div id="test7">
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            所有分类&nbsp;<span></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("fz") style="color:#00FFFF" >我负责的商机</a>&nbsp;<span id="labe1"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("cy") style="color: #00FFFF">我参与的商机</a>&nbsp;<span id="labe2"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("gz") style="color: #00FFFF">我关注的商机</a>&nbsp;<span id="labe3"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("seven") style="color:#00FFFF" >7天未跟单</a>&nbsp;<span id="labe4"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("thirty") style="color: #00FFFF">30天未跟单</a>&nbsp;<span id="labe5"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("ninety") style="color: #00FFFF">90天未跟单</a>&nbsp;<span id="labe6"></span><br>
            <hr>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole('week') style="color:#00FFFF" >本周新增</a>&nbsp;<span id="labe7"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole('lastWeek') style="color: #00FFFF">上周新增</a>&nbsp;<span id="labe8"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole('month') style="color: #00FFFF">本月新增</a>&nbsp;<span id="labe9"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole('lastMonth') style="color:#00FFFF" >上月新增</a>&nbsp;<span id="label0"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole('quarter') style="color: #00FFFF">本季新增</a>&nbsp;<span id="label1"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole('lastQuarter') style="color: #00FFFF">上季新增</a>&nbsp;<span id="label2"></span><br>
            <hr>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("1") style="color:#00FFFF" >已成交商机</a>&nbsp;<span id="label3"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("2") style="color: #00FFFF">已丢弃商机</a>&nbsp;<span id="label4"></span><br><br>
            <img src="../static/image/zoom_search_24px_505321_easyicon.net.png"/>
            <a href="#"  onclick=tableRerole("5") style="color: #00FFFF">已搁置商机</a>&nbsp;<span id="label5"></span><br><br>
            <hr>
        </div>
    </div>


    <div id="right" style="width:85%;float:left;">
        <form class="layui-form"   style="border:1px solid #c2c2c2;" >
           <br>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">商机全称</label>
                    <div class="layui-input-block">
                        <input type="text"    name="conameCliNname"     autocomplete="off" class="layui-input" style="width: 200px;height: 40px">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">商机阶段</label>
                    <div class="layui-input-block" style="width: 200px;height: 40px">
                        <select  name="comStaid"   lay-filter="test">
                            <option value="0">请选择</option>
                            <option value="1">成交</option>
                            <option value="2">丢单</option>
                            <option value="3">竞标</option>
                            <option value="4">初期谈判</option>
                            <option value="5">搁置</option>
                            <option value="6">方案与报价</option>
                            <option value="7">商务谈判</option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">商机负责人</label>
                    <div class="layui-input-block">
                        <input type="text"   name="comUname"    autocomplete="off" class="layui-input" style="width: 200px;height: 40px">
                    </div>
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">所属部门</label>
                    <div class="layui-input-block">
                        <input type="text"    name="comDepid"     autocomplete="off" class="layui-input" style="width: 200px;height: 40px">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">预计成交金额</label>
                    <div class="layui-input-block">
                        <input type="text"   name="comSum"   autocomplete="off" class="layui-input" style="width: 200px;height: 40px">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">预计结单日期</label>
                    <div class="layui-input-block">
                        <input type="text" name="coname" id="date"  placeholder="yyyy-MM-dd" autocomplete="off" style="width: 200px;height: 40px" class="layui-input">
                    </div>
                </div>
            </div>

            <div class="layui-form-item" style="text-align: center;">
            <div class="layui-inline">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo" style="width: 250px;height: 40px" >立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary" style="width: 250px;height: 40px">重置</button>
                </div>
            </div>
            </div>
        </form>

        <script type="text/html" id="toolbarDemo">
            <div class="layui-btn-container">
                <button 	class="layui-btn"  onclick="add()"><i class="layui-icon layui-icon-add-circle"></i> 商机添加</button>
                <a class="layui-btn"  href="#" onclick="document.location.reload()"><i class="layui-icon layui-icon-refresh-1"></i>刷新</a>
            </div>
        </script>

        <script>
            function add(){
                window.location.href="/market/addmarket.html";
            }
        </script>

        <table id="demo" lay-filter="test"></table>

        <script type="text/html" id="coids">
            <a href= "/commercial/toc.do?coid={{d.coid}}&ucid={{d.comUcid}}" class="layui-table-link"  target="blank" >{{d.conname}}</a>
        </script>

        <script type="text/html" id="zhgd">
            <a href= "/commercial/toc.do?coid={{d.coid}}&ucid={{d.comUcid}}" class="layui-table-link"  target="blank" >{{d.docDates}}</a>
        </script>

    </div>
</div>


<script src="/static/js/jquery-3.3.1.min.js"></script>
<script src="/static/layui/layui.js"></script>
<script>
    layui.use(['table','form','jquery','tree','laydate'], function(){
        var table = layui.table;
        var form=layui.form;
        var $=layui.jquery;//异步
        var layer = layui.layer;//弹出层
        var tree = layui.tree;
        var laydate = layui.laydate;

        //日期
        laydate.render({
            elem: '#date'
        });


        //第一个实例   var a=table.render表格重载第二种方式
        table.render({
            elem: '#demo'
            ,toolbar:'#toolbarDemo'
            ,height: 500
            ,url: '/commercial/commercial.do' //数据接口
            ,page: true //开启分页
            ,limit:2
            ,limits:[1,2,10,30]
            ,cols: [[ //表头
                {field: 'conname', title: '客户商机', width:220 , templet:'#coids'}
                ,{field: 'staname', title: '商机阶段', width:220}
                ,{field: 'comSum', title: '预计成交金额', width:220}
                ,{field: 'comUname', title: '商机负责人', width:220}
                ,{field: 'docDates', title: '最后跟单', width:220 , templet:'#zhgd'}
            ]]
        });

        //监听提交
        form.on('submit(formDemo)', function(data){
            console.log(data.field) //当前容器的全部表单字段，名值对形式：{name: value}
            table.reload('demo', {
                url:'/commercial/commercial.do' //数据接口
                ,where: {
                    conameCliNname:data.field.conameCliNname
                    ,comStaid:data.field.comStaid
                    ,comUname:data.field.comUname
                    ,comDepid:data.field.comDepid
                    ,comSum:data.field.comSum
                    ,coname:data.field.coname

                } //设定异步数据接口的额外参数
            });
            return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
        });

        //左边菜单查询
        window.tableRerole=function (value) {
            console.log(value);
            table.reload('demo',{
                url:'/userClien/clientid.do'
                ,where:{
                    "comBusname": value
                }
            });
        };

    });
</script>
</body>
</html>